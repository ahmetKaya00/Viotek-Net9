@model ViotekErp.Models.SiparisDetayViewModel

<style>
    /* Tailwind breakpointlerinden bağımsız kesin çözüm */
    .detay-cards { display: none; }   /* default: web */
    .detay-table { display: block; }  /* default: web */

    @@media (max-width: 640px) {
        .detay-cards { display: block; }
        .detay-table { display: none; }
    }
</style>

<div class="space-y-4 text-xs">

    <!-- Üst Özet Bilgiler (webde aynen, mobilde daha okunur) -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <div>
            <p class="text-slate-500">Evrak No</p>
            <p class="font-semibold text-slate-900">@Model.EvrakSeri @Model.EvrakSira</p>
        </div>
        <div>
            <p class="text-slate-500">Tarih</p>
            <p class="font-semibold text-slate-900">@Model.Tarih?.ToString("dd.MM.yyyy")</p>
        </div>
        <div>
            <p class="text-slate-500">Müşteri</p>
            <p class="font-semibold text-slate-900 break-words">
                @Model.MusteriKod
                @if (!string.IsNullOrEmpty(Model.MusteriAd)) { @($" - {Model.MusteriAd}") }
            </p>
        </div>
        <div>
            <p class="text-slate-500">Satıcı</p>
            <p class="font-semibold text-slate-900 break-words">
                @Model.SaticiKod
                @if (!string.IsNullOrEmpty(Model.SaticiAd)) { @($" - {Model.SaticiAd}") }
            </p>
        </div>
    </div>

    <!-- ✅ MOBİL: Satırlar kart -->
    <div class="detay-cards">
        <div class="flex flex-col gap-3">
            @foreach (var row in Model.Satirlar)
            {
                <div class="rounded-2xl border border-slate-100 bg-white shadow-sm p-3">
                    <div class="flex items-start justify-between gap-3">
                        <div class="min-w-0">
                            <div class="text-[11px] text-slate-500">Satır</div>
                            <div class="text-sm font-semibold text-slate-900">@row.SatirNo</div>
                        </div>

                        <div class="shrink-0 text-right">
                            <div class="text-[11px] text-slate-500">Tutar (TL)</div>
                            <div class="text-sm font-semibold text-emerald-600">
                                @((row.TutarTL ?? 0).ToString("N2"))
                            </div>
                        </div>
                    </div>

                    <div class="mt-3">
                        <div class="text-[11px] text-slate-500">Ürün</div>
                        <div class="text-sm font-semibold text-slate-900 leading-snug break-words">
                            @row.UrunAdi
                        </div>

                        @if (!string.IsNullOrEmpty(row.StokKod))
                        {
                            <div class="text-[11px] text-slate-400 mt-1">@row.StokKod</div>
                        }

                        @if (!string.IsNullOrEmpty(row.Aciklama))
                        {
                            <div class="text-[11px] text-slate-500 mt-1 break-words">@row.Aciklama</div>
                        }
                    </div>

                    <div class="mt-3 grid grid-cols-2 gap-2">
                        <div class="rounded-xl bg-slate-50 border border-slate-100 p-2">
                            <div class="text-[11px] text-slate-500">Miktar</div>
                            <div class="text-xs font-semibold text-slate-900">@((row.Miktar ?? 0).ToString("N2"))</div>
                        </div>

                        <div class="rounded-xl bg-slate-50 border border-slate-100 p-2">
                            <div class="text-[11px] text-slate-500">Birim</div>
                            <div class="text-xs font-semibold text-slate-900">@((row.BirimFiyat ?? 0).ToString("N2"))</div>
                        </div>

                        <div class="rounded-xl bg-slate-50 border border-slate-100 p-2">
                            <div class="text-[11px] text-slate-500">İsk %</div>
                            <div class="text-xs font-semibold text-slate-900">@((row.IskontoYuzde ?? 0).ToString("N2"))</div>
                        </div>

                        <div class="rounded-xl bg-slate-50 border border-slate-100 p-2">
                            <div class="text-[11px] text-slate-500">Net Birim</div>
                            <div class="text-xs font-semibold text-slate-900">@((row.NetBirimFiyat ?? 0).ToString("N2"))</div>
                        </div>

                        <div class="rounded-xl bg-slate-50 border border-slate-100 p-2">
                            <div class="text-[11px] text-slate-500">Döviz</div>
                            <div class="text-xs font-semibold text-slate-900">@row.Doviz</div>
                        </div>

                        <div class="rounded-xl bg-slate-50 border border-slate-100 p-2">
                            <div class="text-[11px] text-slate-500">Kur</div>
                            <div class="text-xs font-semibold text-slate-900">@((row.Kur ?? 1).ToString("N4"))</div>
                        </div>
                    </div>
                </div>
            }

            <!-- Mobil Toplamlar -->
            <div class="rounded-2xl border border-slate-100 bg-slate-50 p-3">
                <div class="flex items-center justify-between gap-3">
                    <div class="text-xs font-semibold text-slate-700">Genel Toplam (KDV Hariç)</div>
                    <div class="text-sm font-bold text-slate-900">@Model.GenelToplamTL.ToString("N2")</div>
                </div>
            </div>

            <div class="rounded-2xl border border-emerald-200 bg-emerald-50 p-3">
                <div class="flex items-center justify-between gap-3">
                    <div class="text-xs font-semibold text-emerald-700">Genel Toplam (KDV %20 Dahil)</div>
                    <div class="text-sm font-bold text-emerald-700">@Model.GenelToplamKdvliTL.ToString("N2")</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ✅ WEB: Tablo (webde aynı kalsın) -->
    <div class="detay-table">
        <div class="border border-slate-100 rounded-xl overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full text-left text-[11px]">
                    <thead class="bg-slate-50 border-b border-slate-100">
                        <tr>
                            <th class="px-3 py-2 font-semibold text-slate-500 w-12">Satır</th>
                            <th class="px-3 py-2 font-semibold text-slate-500">Ürün</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-right w-16">Miktar</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-right w-20">Birim</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-right w-16">İsk %</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-right w-20">Net Birim</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-center w-14">Döviz</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-right w-16">Kur</th>
                            <th class="px-3 py-2 font-semibold text-slate-500 text-right w-24">Tutar (TL)</th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var row in Model.Satirlar)
                        {
                            <tr class="border-b border-slate-50 align-top">
                                <td class="px-3 py-1">@row.SatirNo</td>
                                <td class="px-3 py-1">
                                    <div class="font-semibold text-slate-900 leading-snug">@row.UrunAdi</div>
                                    @if (!string.IsNullOrEmpty(row.StokKod))
                                    {
                                        <div class="text-[10px] text-slate-400">@row.StokKod</div>
                                    }
                                    @if (!string.IsNullOrEmpty(row.Aciklama))
                                    {
                                        <div class="text-[10px] text-slate-500 mt-0.5">@row.Aciklama</div>
                                    }
                                </td>

                                <td class="px-3 py-1 text-right whitespace-nowrap">@((row.Miktar ?? 0).ToString("N2"))</td>
                                <td class="px-3 py-1 text-right whitespace-nowrap">@((row.BirimFiyat ?? 0).ToString("N2"))</td>
                                <td class="px-3 py-1 text-right whitespace-nowrap">@((row.IskontoYuzde ?? 0).ToString("N2"))</td>
                                <td class="px-3 py-1 text-right whitespace-nowrap">@((row.NetBirimFiyat ?? 0).ToString("N2"))</td>
                                <td class="px-3 py-1 text-center whitespace-nowrap">@row.Doviz</td>
                                <td class="px-3 py-1 text-right whitespace-nowrap">@((row.Kur ?? 1).ToString("N4"))</td>
                                <td class="px-3 py-1 text-right whitespace-nowrap">@((row.TutarTL ?? 0).ToString("N2"))</td>
                            </tr>
                        }

                        <tr class="bg-slate-50 border-t border-slate-200">
                            <td class="px-3 py-2 text-right font-semibold" colspan="8">Genel Toplam (KDV Hariç)</td>
                            <td class="px-3 py-2 text-right font-semibold">@Model.GenelToplamTL.ToString("N2")</td>
                        </tr>
                        <tr class="bg-emerald-50 border-t border-emerald-200">
                            <td class="px-3 py-2 text-right font-semibold" colspan="8">Genel Toplam (KDV %20 Dahil)</td>
                            <td class="px-3 py-2 text-right font-semibold">@Model.GenelToplamKdvliTL.ToString("N2")</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>